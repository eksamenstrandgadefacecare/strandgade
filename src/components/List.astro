---
// const behandlinger = await fetch(
//   "https://zymhzxfscypovmtutfib.supabase.co/rest/v1/behandlinger",
//   {
//     method: "GET",
//     headers: {
//       apikey:
//         "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp5bWh6eGZzY3lwb3ZtdHV0ZmliIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM3MzI2OTcsImV4cCI6MjA0OTMwODY5N30.ZWO8J1GEX5z2Em66Apb2wdoYYIPKVJevYH1qrIgUDeM", // Use environment variable for security
//     },
//   }
// ).then((res) => res.json());
// import Single from "./Single.astro";
// ---

// <ul>
//   <li>
//     {behandlinger.map((behandling) => <Single behandling={behandling} />)}
//   </li>
// </ul>

// @ts-nocheck
export async function getStaticPaths() {
  const url = "https://zymhzxfscypovmtutfib.supabase.co/rest/v1/behandlinger";
  const options = {
    headers: {
      apikey:
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp5bWh6eGZzY3lwb3ZtdHV0ZmliIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM3MzI2OTcsImV4cCI6MjA0OTMwODY5N30.ZWO8J1GEX5z2Em66Apb2wdoYYIPKVJevYH1qrIgUDeM",
    },
  };

  const behandlinger = await fetch(url, options).then((res) => res.json());

  return behandlinger.map((behandling) => ({
    params: { behandling: behandling.slug }, // [artist]=artist.slug
    props: { behandling }, // send al data med som props
  }));
}

const { behandling } = Astro.props;
---
